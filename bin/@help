#!/usr/bin/env zsh
set -e

echo "Custom CLI commands, use --help on each for usage."
echo "----------------------------------------------"
echo ""

# Prune .nvm so it doesn't look through those folders
# Look and find all items in bin folders
# Ignore @help so it doesn't recursively call itself
# Sort the resulting executable names

find "$DOTFILES" -name ".nvm" -prune -o -path "*/bin/*" -type f -not -name "@help" -exec basename {} + | sort | while read -r cmd; do
    # Line up the command and the descriptions
    printf "    %-13s%8s" "$cmd"
    "$cmd" --description 2>/dev/null || echo "(No description available)"
done

echo ""
echo "----------------------------------------------"
